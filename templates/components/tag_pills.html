{% if active_tags.len() > 0 %}
  <div class="tag-pills" aria-label="Active tag filters">
    <div class="tag-pills-header">
      <span class="tag-pills-label">Filtered by tags:</span>
    </div>
    <div class="tag-pills-container">
      {% for tag in active_tags %}
        <span class="tag-pill" data-tag="{{ tag }}">
          <span class="tag-pill-text">#{{ tag }}</span>
          <button
            type="button"
            class="tag-pill-remove"
            aria-label="Remove {{ tag }} filter"
            onclick="removeTagFilter('{{ tag }}')"
            title="Remove {{ tag }} filter"
          >
            Ã—
          </button>
        </span>
      {% endfor %}
      {% if active_tags.len() > 1 %}
        <button
          type="button"
          class="tag-pills-clear-all"
          onclick="clearAllTagFilters()"
          title="Clear all tag filters"
        >
          Clear all tags
        </button>
      {% endif %}
    </div>
  </div>

  <script>
    function removeTagFilter(tagToRemove) {
      // Dispatch event to TagCompletion to handle removal
      console.log("Removing tag filter:", tagToRemove);
      document.dispatchEvent(
        new CustomEvent("removeCommittedTag", {
          detail: { tag: tagToRemove },
        }),
      );
    }

    function clearAllTagFilters() {
      // Dispatch event to TagCompletion to handle clearing all tags
      console.log("Clearing all tag filters");
      document.dispatchEvent(new CustomEvent("clearAllCommittedTags"));
    }
  </script>
{% endif %}
